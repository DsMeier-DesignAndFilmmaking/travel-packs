<!DOCTYPE html>
<html lang="en">
<head>
  <script>
    (function() {
      const path = window.location.pathname;
      if (path.includes('/city/')) {
        const citySlug = path.split('/').filter(Boolean).pop();
        const cityName = citySlug.charAt(0).toUpperCase() + citySlug.slice(1);
        const manifest = {
          "id": path,
          "name": cityName + " Travel Pack",
          "short_name": cityName,
          "start_url": window.location.origin + path,
          "display": "standalone",
          "icons": [{ "src": "/pwa-192x192.png", "sizes": "192x192", "type": "image/png" }]
        };
        const link = document.createElement('link');
        link.rel = 'manifest';
        link.href = 'data:application/json;base64,' + btoa(JSON.stringify(manifest));
        document.head.appendChild(link);

        document.title = cityName + " Travel Pack";
        const meta = document.createElement('meta');
        meta.name = "apple-mobile-web-app-title";
        meta.content = cityName + " Travel Pack";
        document.head.appendChild(meta);
      }
    })();
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#0f172a">
  <link rel="icon" type="image/png" href="/pwa-192x192.png">
  <link rel="apple-touch-icon" href="/pwa-192x192.png">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Local City Travel Packs</title>
</head>
<body>
  <div id="root"></div>
  <script type="module" src="/src/main.tsx"></script>
  <script>
    (function() {
      function log(label) {
        var link = document.querySelector('link[rel="manifest"]');
        console.log('[A2HS ' + label + '] manifest:', link ? link.href.substring(0, 60) + '...' : 'none', '| title:', document.title);
      }
      if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', function() { log('DOMContentLoaded'); });
      else log('DOMContentLoaded(sync)');
      window.addEventListener('load', function() { log('load'); });
    })();
  </script>
</body>
</html>
