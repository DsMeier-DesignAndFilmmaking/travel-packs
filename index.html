<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#0f172a">
  <!-- No static manifest link: usePwaManifest / ManifestManager inject it on mount so the browser never uses a cached /manifest.webmanifest during A2HS. -->
  <link rel="icon" type="image/png" href="/pwa-192x192.png">
  <link rel="apple-touch-icon" href="/pwa-192x192.png">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Local City Travel Packs">
  <title>Local City Travel Packs</title>
  <!-- Override title and apple-mobile-web-app-title for city deep links so A2HS sees correct name before React -->
  <script>
    (function() {
      var cityMatch = /^\/city\/([^/]+)$/.exec(location.pathname || '');
      if (cityMatch) {
        var slug = cityMatch[1];
        var titleFromSlug = slug.replace(/-/g, ' ').replace(/\b\w/g, function(c) { return c.toUpperCase(); });
        var cityTitle = titleFromSlug + ' Travel Pack';
        document.title = cityTitle;
        var meta = document.querySelector('meta[name="apple-mobile-web-app-title"]');
        if (meta) meta.content = cityTitle;
        else {
          meta = document.createElement('meta');
          meta.name = 'apple-mobile-web-app-title';
          meta.content = cityTitle;
          document.head.appendChild(meta);
        }
      }
    })();
  </script>
</head>
<body>
  <div id="root"></div>
  <script type="module" src="/src/main.tsx"></script>
  <!-- A2HS debug: log manifest and title when document is ready and when fully loaded -->
  <script>
    function logA2HSState(label) {
      var link = document.querySelector('link[rel="manifest"]');
      console.log('[A2HS ' + label + '] manifest href:', link ? link.href : 'none', '| document.title:', document.title);
    }
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', function() { logA2HSState('DOMContentLoaded'); });
    } else {
      logA2HSState('DOMContentLoaded(sync)');
    }
    window.addEventListener('load', function() { logA2HSState('load'); });
  </script>
</body>
</html>